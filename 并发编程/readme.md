# 1. 什么是线程和进程
- 区别
- 联系
- 线程的上下文切换是什么
- 线程的并发与并行有啥区别

# 简答
## 联系
首先线程是进程的一个执行单元，进程可以调用系统的API来创建线程，并分配相应的资源。  
一个进程可以有多个线程，同一个进程的线程共享进程的内存空间。  
进程是指内存中运行的一个应用程序，每个进程都有自己独立的**内存空间**，是系统运行程序的基本单位。  
线程是进程中的一个执行单位，负责执行进程中的任务。  
## 区别
进程间的内存空间是独立的不共享的，独立的。  
线程之间的**堆空间**和**方法区**是共享的，**栈空间**和**程序计数器**是独立的。  
## 什么是并发和并行
首先针对的是多核计算机  
### 并发
Concurrent，是指在同一时间段内，多个程序在执行。宏观上是多个程序同时进行，微观上程序是分时交替执行。
### 并行
Parallel，微观上多个程序同时执行，每个处理器可以同时执行程序的一部分，从而实现程序的并行执行。  
并发是一种能力，并行时一种手段。  
## 线程的上下文切换
当一个线程在执行中被暂停，保存当前的上下文信息（包括寄存器和程序计数器的内容）。  
当一个线程要恢复执行时，则要加载上下文信息。  
- 当一个线程被暂停时，操作系统会将该线程的当前状态和执行上下文保存到内存中
- 选中下一个线程时，将该线程的上下文信息从内存中加载到CPU的寄存器中
- 恢复上下文后，操作系统会讲程序计数器设置为被选中线程的入口地址。

# 2.使用了多线程会带来的问题
- 数据同步的问题
- 线程安全的问题
- 死锁的问题
## 线程安全问题
多线程环境下，同时修改共享数据可能会出现数据不一致或者数据损坏的情况
## 性能问题
线程的创建和销毁需要时间，过多的线程会导致性能出现问题
## 资源竞争，死锁的问题
多个线程同时访问共享资源，可能会导致资源竞争，使得某些线程获得较少的资源
## 调试困难 

# 3. 什么是死锁？如何排查死锁?
死锁是指两个线程因抢夺资源导致互相等待的现象。  
比如两个线程A，B，他们需要锁1和锁2才能执行任务。  
但是A锁了1， B锁了2，这样就导致了死锁。  
还比如循环等待。   
## 如何排查死锁  
在前端中因为没有多线程的方法，为了模拟多线程，使用的是异步来处理，就像老师说的自旋，但是前端是真的一直在那旋～，一直循环事件（方法）数组。  数据同步基本使用的订阅发布模式，数据改变了触发事件通知一下”大家“。  
上面说的可能和后端的避免死锁的想法有点类似。  
排查死锁的方法（我没有具体查看过，只说下知道的）：  
- 通过日志信息。
- 使用线程dump，获取某一个时刻所有线程的状态，查看线程占用了哪些资源。
- 调试工具，查看锁的持有情况及资源。
- 复现